<?php echo $paymentpage;exit; ?>
<script src="<?php echo BASE; ?>assets/js/myjs.js"></script>
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-xVVam1KS4+Qt2OrFa+VdRUoXygyKIuNWUUUBZYv+n27STsJ7oDOHJgfF0bNKLMJF" crossorigin="anonymous">
<style type="text/css">
.validation_error{
    color:red;
    
}
.secyrityicons li{
    float: left;
    list-style: none;
    height: 60px;
    position: relative;
    width: 80px;
}
.btn.btn-pay {
    font-weight: 900;
    font-size: 20px;
    margin-top: 24px;
    margin-bottom: 24px;
}.btn.btn-block {
    display: block;
    width: 100%;
}.btnpayment {
    position: relative;
    display: inline-block;
    height: 64px;
    line-height: 63px;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    touch-action: manipulation;
    cursor: pointer;
    user-select: none;
    -webkit-appearance: none;
    outline: 0;
    border-radius: 32px;
    border: 0;
    background-color: #fea921;
    font-size: 18px;
    font-weight: 600;
    color: #fff;
    transition: background-color .15s ease-in-out,border-color .15s ease-in-out,opacity .1s ease-in-out;
}
.lh-1 {
    line-height: 1.1;
}
.tx-primary {
    color: #e5d335;
}
.mg-l-5 {
    margin-left: 5px;
}.tx-28 {
    font-size: 28px;
}.mg-t-10 {
    margin-top: 10px;
}
.section {
    padding: 100px 0 80px;
}.container {
    width: 100%;
    padding-right: 15px;
    padding-left: 15px;
    margin-right: auto;
    margin-left: auto;
}
.default-part {
    max-width: 680px;
    margin: 0 auto;
    border: 1px solid #d0e3eb;
    border-radius: 10px;
    background: #fff;
    box-shadow: 5px 9px 60px rgba(50,117,208,.1);
    padding: 40px 45px;
    width: 100%;
    position: relative;
}
.default-part .title {
    font-size: 24px;
    margin: 0 0 10px;
    padding: 0;
}.template-content p {
    margin: 15px 0 15px;
    text-align: center;
}.default-part .subtitle {
    font-size: 18px;
    margin: 0 0 35px;
}.btn-pink {
    border-radius: 26px;
    border-color: #f16334 !important;
    background-color: #f16334 !important;
    padding: 10px 25px;
    min-width: 230px;
    display: inline-block;
    color: #fff;
    border: 2px solid transparent;
    text-align: center;
    position: relative;
    top: 0;
}.mt15 {
    margin-top: 15px !important;
}.package {
    padding: 25px 0;
    border-top: 1px solid #babdfb;
    margin: 40px 0 0;
}.package p {
    width: calc(100% - 240px);
}.package p, .package a {
    display: inline-block;
    vertical-align: middle;
    -ms-text-overflow: ellipsis;
    text-overflow: ellipsis;
    overflow: hidden;
}.package-select {
    padding: 25px 0;
    border-top: 1px solid #babdfb;
    margin: 40px 0 0;
    display: none;
}.package-select .select-inner {
    width: 100%;
    position: relative;
}.package-select .select-inner:before {
    content: '\f107';
    font-family: 'Font Awesome 5 Free';
    font-size: 18px;
    color: #598eee;
    font-weight: 800;
    display: inline-block;
    vertical-align: baseline;
    margin: 0 0 0 5px;
    position: absolute;
    top: 20px;
    left: 100%;
    margin-left: -20px;
}.package-select select {
    border: 1px solid #babdfb;
    width: 100%;
    padding: 10px 15px;
    margin: 10px 0 10px;
    border-radius: 4px;
    color: #babdfb;
    font-size: 18px;
    position: relative;
    background: 0 0;
}.default-part {
    max-width: 680px;
    margin: 0 auto;
    border: 1px solid #d0e3eb;
    border-radius: 10px;
    background: #fff;
    box-shadow: 5px 9px 60px rgba(50,117,208,.1);
    padding: 40px 45px;
    width: 100%;
    position: relative;
}.default-part .title {
    font-size: 24px;
    margin: 0 0 10px;
    padding: 0;
}.payment-div .price {
    font-size: 76px;
}#paypal-button-container {
    margin: 30px auto;
    text-align: center;
}.note {
    font-size: 16px;
}.account-view .account-change {
    border-bottom: 0;
}

.account-change {
    border-bottom: 1px solid #babdfb;
    padding: 0 0 45px;
    margin: 0 0 45px;
}.account-change img {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    display: inline-block;
    vertical-align: middle;
}.account-change a {
    display: inline-block;
    vertical-align: middle;
}.account-change p {
    display: inline-block;
    overflow: hidden;
    -ms-text-overflow: ellipsis;
    text-overflow: ellipsis;
    width: calc(100% - 311px);
    vertical-align: middle;
    padding: 0 20px;
}.account-change {
    border-bottom: 1px solid #babdfb;
    padding: 0 0 45px;
    margin: 0 0 45px;
}.account-change.account-photo p {
    width: 100%;
    padding: 0;
}.account-change.account-photo p {
    width: 100%;
    padding: 0;
}.row {
    display: -ms-flexbox;
    display: flex;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
    margin-right: -15px;
    margin-left: -15px;
}.account-change .media-cor {
    margin-bottom: 10px;
}.col-12 {
    position: relative;
    padding-right: 15px;
    padding-left: 15px;
}.account-change a {
    display: inline-block;
    vertical-align: middle;
}
.r-plan .r-item {
    display: flex;
    align-items: flex-start;
    line-height: 24px;
    margin-bottom: 32px;
}
.r-plan .r-item .icon {
    color: #fc591e;
    margin-right: 8px;
}
.r-plan .r-item .info {
    flex-grow: 1;
    color: #322f3b !important;
    font-size: 18px;
}.r-plan .r-item .info span {
    display: inline-block;
}.r-item .info strong {
    font-weight: 600;
}.r-total {
    position: relative;
    z-index: 90;
    display: flex;
    font-size: 21px;
    line-height: 24px;
    color: #322f3b;
}.r-total .line {
    display: block;
}.r-total .price {
    flex-grow: 1;
    display: block;
    text-align: right;
}
.media-item {
    border-radius: 6px;
    -webkit-transition: -webkit-box-shadow .2s linear;
    transition: -webkit-box-shadow .2s linear;
    transition: box-shadow .2s linear;
    transition: box-shadow .2s linear,-webkit-box-shadow .2s linear;
    -webkit-box-shadow: 0 2px 8px 1px rgba(0,0,0,.2);
    box-shadow: 0 2px 8px 1px rgba(0,0,0,.2);
    display: table;
    width: 100%;
    height: 100%;
    overflow: hidden;
    min-height: 140px;
    position: relative;
}.media-item img {
    width: 100% !important;
    height: 100% !important;
    object-fit: cover !important;
    display: block !important;
    border-radius: 0 !important;
}

.account-change img {
    width: 70px;
    height: 70px;
    border-radius: 50%;
    display: inline-block;
    vertical-align: middle;
}.media-item .hover {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    background: rgba(0,0,0,.4);
    height: 100%;
    width: 100%;
    text-align: center;
    line-height: 140px;
    color: #fff;
    opacity: 0;
    visibility: hidden;
    transition: all .3s ease;
}.media-item .hover i {
    font-size: 16px;
    margin: 0 10px 0 0;
}.summary {
    display: none;
}.summary-item {
    width: calc(50% - 25px);
    display: inline-block;
    vertical-align: middle;
    margin: 5px 10px 5px 0;
    border-radius: 6px;
    padding: 10px;
    -webkit-box-shadow: 0 3px 10px 1px rgba(0,0,0,.15);
    box-shadow: 0 3px 10px 1px rgba(0,0,0,.15);
}.summary-item img {
    width: 50px;
    height: 50px;
    border-radius: 6px;
    display: inline-block;
    vertical-align: middle;
}.summary-item a {
    display: inline-block;
    vertical-align: middle;
}.account-change .media-item.active .hover {
    opacity: 1;
    visibility: visible;
}.custom-loader {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    text-align: center;
    font-size: 64px;
    padding-top: 20%;
    background: rgba(255, 255, 255, .9)
}

.custom-loader .fas {
    opacity: .5
}#upgrade-body{
    margin: 0 0 15px;
    text-align: left;
}#checkout-payment-applied-upgrade p{
    margin: 0 0 15px;
    text-align: left;
}
.d-none{
    display: block !important;
}
section.header-top .mini-menu {
    padding-left: 0px;
}
@media (min-width: 1200px){

  .container {
    max-width: 1140px;
    margin: 0 auto;
    padding-right: 15px;
    padding-left: 15px;
}
}

@media (max-width: 767px){
#upgrade-button {
    min-width: auto !important;
    width: 100%;
}
#checkout-payment-applied-upgrade p {
    display: block !important;
    width: 100% !important;
    margin-bottom: 15px;
}
.section>:first-child {
    padding-top: 100px !important;
}
.account-change p, .account-change.package p, .package p {
    width: 100%;
    margin: 0 0 20px;
}.package-select .select-inner {
    width: 100%;
}.account-change img {
    display: table;
    margin: 0 auto 30px;
}.summary-item {
    width: 100%;
}

}

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cleave.js/1.0.2/cleave.min.js"></script>
        
<section class="package-content" style="padding: 0px 0 100px;">
      <div class="container">
        <div class="row">
          <div class="col-md-12">
            
             <!-- Copied Content -->
             <div class="section template-content">
                 <!--<div class="pk-header">
                            <div class="title text-center">
                <h1 class="title-name"><strong>Checkout<strong></strong></h1> 
              </div></div>-->
   <div class="container">
      <div class="default-part mb30 checkout-section">
       <div class="body">

<div class="r-body">
    <div class="title text-center">
                <h1 class="title-name"><strong>Order Summary<strong></strong></h1> 
              </div>
<hr class="show-sm">
<div class="r-plan">
<div class="r-item">
<div class="icon">
<div class="icon">
<i class="fa fa-user icon"></i>
</div> </div>
<div class="info"><span><strong><?php echo (isset($itemQuantity))?$itemQuantity:0; ?></strong> <?php echo (isset($product))?$product:''; ?></span></div>
<div class="price">$<?php echo (isset($price))?number_format((float)$price, 2, '.', ''):0.00; ?></div>
</div>
<?php if(isset($offer_applied) && $offer_applied == 1): ?>
<div class="r-item upsell">
<div class="icon">
<div class="icon">
<i class="fa fa-user icon"></i>
</div> </div>
<div class="info"><span><strong><?php echo (isset($extraActivities))?$extraActivities:0; ?></strong> Extra <?php echo (isset($product))?$product:''; ?></span> </div>
<div class="price">$<?php echo (isset($offer_price))?number_format((float)$offer_price, 2, '.', ''):''; ?></div>
</div>
<?php endif; ?>

<?php if(isset($iscoupanApplied) && $iscoupanApplied == 1): ?>
<div class="r-item upsell">
<div class="icon">
<div class="icon">
<i class="fa fa-user icon"></i>
</div> </div>
<div class="info"><span>Coupon <strong><?php echo (isset($coupan))?$coupan:''; ?></strong></span> </div>
<div class="price"><?php echo $coupon_disc; ?>%</div>
</div>
<?php endif; ?>
</div>

<div class="r-total">
<strong class="line">Total</strong>
<strong class="total-cost price">$<?php echo (isset($payableAmount))?number_format((float)$payableAmount, 2, '.', ''):''; ?></strong>
</div>
 </div>
</div>
      
      </div>
      <div id="single-order-payment-div">
<div class="default-part payment-div" style="margin-top: 20px;" data-coupancode="no" data-discount="0.00" data-applied="0" data-offerapplied="0">
<div class="box ccheckout">

<div class="body">
    <div id="content-needs-to-change">
    
<div class="title text-center">
                <h1 class="title-name"><strong>Checkout<strong></strong></h1> 
              </div>
<hr class="show-sm">
<div id="card_error_place"></div>
<form method="post" id="card_details_form" action="<?php echo cn('checkout/payop/process_payment'); ?>">
<input type="hidden" name="card_type" id="card_type" value="">
<div class="row">
    <div class="col-sm-12 cardZipGroup">
        <div class="form-group">
<div class="input-group">
<div class="input-group-prepend">
    <span class="input-group-text"><i class="fa fa-user"></i></span>
    </div>
    <input class="form-control spinner" name="holderName" type="text" id="holderName" placeholder="Cardholder Name" >
    </div>
    <span class="validation_error" id="error_holderName"></span>
</div>
<div class="form-group">
    <div class="input-group">
                                        <div class="input-group-prepend">
                                            <span class="input-group-text"><i class="fa fa-credit-card"></i></span>
                                        </div>
                                        <input type="text" name="pan" value="" placeholder="Bank card number" class="form-control inputCreditCard" id="pan" style="border-top-right-radius:4px;border-bottom-right-radius:4px;">
                                    </div>
                                    <span class="validation_error" id="error_pan"></span>

</div>
</div>
   <div class="col-sm-6 cardZipGroup">
<div class="form-group">
    <div class="input-group">
        <div class="input-group-prepend">
    <span class="input-group-text"><i class="fa fa-calendar"></i></span>
    </div>
<input class="form-control spinner expiry" placeholder="Card Expiry Date" name="expirationDate"/>
                                            
</div>
<span class="validation_error" id="error_expirationDate"></span>
                                            </div>
</div>
<div class="col-sm-6 cardZipGroup">
<div class="form-group">
    <div class="input-group">
<div class="input-group-prepend">
    <span class="input-group-text"><i class="fa fa-lock"></i></span>
    </div>
    <input class="form-control spinner" name="cvv" type="text" id="cvvNumber" placeholder="CVV" value="">
    </div>
    <span class="validation_error" id="error_cvv"></span>
    
    <input class="form-control spinner" name="invoiceIdentifier" type="hidden" id="invoiceIdentifier"  value="<?php echo (isset($invoice_identifier))?$invoice_identifier:''; ?>">
   
</div>
</div>
<div class="col-sm-12 cardZipGroup">
<div id="paypal-button-container">
        <p><a href="javascript:void(0);" id="pay_final_payment" class="btn-pink"><i class="fa fa-lock" style="font-size: 18px;margin-right: 5px;"></i> Pay $<?php echo (isset($payableAmount))?number_format((float)$payableAmount, 2, '.', ''):''; ?> USD</a></p>
    </div>
    </div>
    </form>
    <script>
    new Cleave('.expiry', {
   date: true,
   datePattern: ['m', 'y']
});
        var cleave = new Cleave('.inputCreditCard', {
              creditCard: true,
              onCreditCardTypeChanged: function (type) {
                console.log(type)
                var card = $('#creditCardType').find('.'+type);
                 $("#card_type").val(type);
                if(card.length) {
                  card.addClass('tx-primary');
                  card.siblings().removeClass('tx-primary');
                } else {
                  $('#creditCardType span').removeClass('tx-primary');
                }
              }
            });
    </script>
    <script>
        $('#pay_final_payment').click(function(){
            var form = $('#card_details_form');
        $('#card_error_place').html('');
        loader(true, '#content-needs-to-change');
        event.preventDefault();
        $.ajax({ 
            url: form.attr("action"),
            method: 'post',
            dataType: 'json',  //3
            data: form.serialize() //4
        }).done( function (response) {  
            loader(false, '#content-needs-to-change');
            $('.validation_error').html('');
            $('#card_error_place').html('');
            if(response.status == 'error' && (response.type === 'validation_error')){
                $.each( response.errors, function( key, error) { 
                                $("#error_"+key+"").show().html('<strong>'+error+'</strong>');
                            });
            }
            if(response.status == 'error' && (response.type === 'card_error')){
                var msg = '<div class="alert alert-danger text-center">'+response.errors+'</div>';
              $('#card_error_place').html('');
              $('#card_error_place').html(msg);
            }
            if(response.status == 'error' && (response.type === 'payop_error')){
                $.each( response.errors, function( key, error) { 
                                $("#error_"+key+"").show().html('<strong>'+error[0]+'</strong>');
                            });
            }
            if(response.status == '3d_redirect' && (typeof response.type === 'undefined')){
                window.location.href = response.url;
            }
            if(response.status == 'success'){
                console.log(response);
                var url = '<?php echo cn('checkout/ipaytotal/complete'); ?>?status='+response.data.status+'&message='+response.data.message+'&order_id='+response.data.order_id+'&sulte_apt_no='+response.data.sulte_apt_no;
                window.location.href = url;
            }
        }).fail(function() {
            loader(false, '#content-needs-to-change'); 
            alert('i am failure');
         });
    });
    </script>
    </div>
    <div class="col-sm-12 cardZipGroup">
    <ul class="secyrityicons" style="margin:0 auto;display:table;">
                        
                        
                       
                        
                        <li>
                            <img src="https://ipaytotal.solutions/imgs/SafeSecureLogo.jpg" alt="SafeSecure" title="SafeSecure" border="0" style="width: 70px;">
                        </li>
                        <li>
                            <img src="https://ipaytotal.solutions/imgs/ssl.png" alt="SSL" title="SSL" border="0" style="width: 70px;">
                        </li>
                        <li>
                            <img src="https://ipaytotal.solutions/imgs/sitelock.png" alt="sitelock" title="sitelock" border="0" style="width: 70px;">
                        </li>
                        
                        <li>
                            <img src="https://ipaytotal.solutions/imgs/comodo.png" alt="Comode" title="Comode" border="0" style="width: 80px;">
                        </li>
                    </ul>
                    
    </div>
</div>

    
</div>
</div>
</div>
</div>
   </div>
</div>
             <!-- Copied Content -->
            <!-- Category Content -->
            
            <!-- Category Content -->
          </div>
        </div>
      </div>
    </section>
    <script>
        $('#continue-to-card-page').click(function(){
            var form = $('#billing_address_form');
        loader(true, '#content-needs-to-change');
        event.preventDefault();
            
        $.ajax({ 
            url: form.attr("action"),
            method: 'post',
            dataType: 'json',  //3
            data: form.serialize() //4
        }).done( function (response) {  
            loader(false, '#content-needs-to-change');
            $('.validation_error').html('');
            if(response.status == 'error'){
                $.each( response.errors, function( key, error) { 
                                $("#error_"+key+"").show().html('<strong>'+error+'</strong>');
                            });
            }
            if(response.status == 'success'){
               $('#content-needs-to-change').empty().html(response.view);
            }
        }).fail(function() {
            loader(false, '#content-needs-to-change'); 
            alert('i am failure');
         });
    });
    </script>
    <script>
            var countryCode = '<?php echo (isset($location['countryCode']))?$location['countryCode']:''; ?>';
            $('#country').val(countryCode);
            </script>